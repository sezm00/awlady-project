
<!DOCTYPE html>
<html>
    <head>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Asar&family=Raleway:ital,wght@0,100..900;1,100..900&family=Yeseva+One&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Admin Homepage</title>
        <link rel="stylesheet" href="style/admin_style.css">
    </head>
    <body>
        <div class="mainContainer">
            <div class="header">
                <div class="sideNav">
                    <div class="user">
                        <?php
                        // Retrieve the username from the URL parameter
                        if(isset($_GET['user'])) {
                            $logged_in_username = $_GET['user'];
    
                            // Find the index of the logged-in user
                            $user_index = array_search($logged_in_username, $users);
    
                            // Check if the user is found before accessing other arrays
                            if ($user_index !== false) {
                                echo '<img src="' . $imgs[$user_index] . '" class="userImg">';
                                echo '<div>';
                                echo '<h2>' . $names[$user_index] . '</h2>';
                                echo '<p>' . $emails[$user_index] . '</p>';
                                echo '</div>';
                            } else {
                                // Handle the case when the user is not found
                                echo '<p>User not found</p>';
                            }
                        } 
                        ?>
                    </div>
                    <ul>
                        <li class="font-size">
                            <img src="img/dashboard.png">
                            <a href="#"><p>Dashboard</p></a>
                        </li>
                        <li>
                            <img src="img/task.svg">
                            <a href="admin-homepage.php"><p>Tasks</p></a>
                        </li>
                        <li>
                            <img src="img/donations.png">
                            <a href="#"><p>Donations</p></a>
                        </li>
                        <li>
                            <img src="img/users.png">
                            <a href="#"><p>Users</p></a>
                        </li>
                        <li>
                            <img src="img/comment.png">
                            <a href="#"><p>Comments</p></a>
                        </li>
                        <li>
                            <img src="img/contacts.svg">
                            <a href="#"><p>Contacts</p></a>
                        </li>
                        <li>
                            <img src="img/schedule.svg">
                            <a href="#"><p>Schedule</p></a>
                        </li>
                        <li>
                            <img src="">
                            <a href="#"><p></p></a>
                        </li>
                    </ul>
                    <ul>
                        <li>
                            <img src="img/logout-icon.png">
                            <a href="login.php"><p>Logout</p></a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="tasks-container">
                <?php
                // Iterate over the tasks array
                foreach ($tasks as $task) {
                    // Display tasks for the current user
                    if ($task['name'] === $logged_in_username) {
                        // Iterate over the tasks for the current user
                        foreach ($task['tasks'] as $task_detail) {
                            ?>
                            <div class="task-details">
                                <p><?php echo $task_detail['title']; ?></p>
                                <p>Due Date/Time: <?php echo $task_detail['due_date']; ?></p>
                                <p>Status: <?php echo $task_detail['status']; ?></p>
                            </div>
                            <?php
                        }
                    }
                }
                ?>
            </div>
        </div>
    </body>
</html>
